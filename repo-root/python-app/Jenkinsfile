podTemplate(containers: [
  containerTemplate(
    name: 'python',
    image: 'python:3.11',
    command: 'cat',
    ttyEnabled: true
  )
]) {
  node(POD_LABEL) {
    container('python') {
      stage('Checkout') {
        checkout scm
      }

      stage('Install') {
        sh 'pip install -r requirements.txt'
      }

      stage('Test') {
        sh 'pytest tests/'
      }
    }
  }
}
